
#include "launchpad.h"
#include "action_layer.h"
#include "eeconfig.h"

extern keymap_config_t keymap_config;

// Needs Unicode Hex Input enabled in MacOS
// https://sevenseacat.net/posts/2018/unicode-in-qmk-on-osx/


// Each layer gets a name for readability, which is then used in the keymap matrix below.
// The underscores don't mean anything - you can have a layer called STUFF or any other name.
// Layer names don't all need to be of the same length, obviously, and you can also skip them
// entirely and just use numbers.
#define _QWERTY 0

#define _FUNC 15

// Fillers to make layering more clear
#define _______ KC_TRNS
#define XXXXXXX KC_NO

#define LANG_SWITCH LCTL(KC_SPC)
#define LOCK LCTL(LGUI(KC_Q))
#define SS LGUI(LSFT(KC_4))

enum custom_keycodes {
  PLUS1,
  GRUNT,
  NODE
};

enum unicode_name {
  GRIN, // grinning face ðŸ˜Š
  TJOY, // tears of joy ðŸ˜‚
  SMILE, // grining face with smiling eyes ðŸ˜
  HEART, // heart â¤
  EYERT, // smiling face with heart shaped eyes ðŸ˜
  CRY, // crying face ðŸ˜­
  SMEYE, // smiling face with smiling eyes ðŸ˜Š
  UNAMU, // unamused ðŸ˜’
  KISS, // kiss ðŸ˜˜
  HART2, // two hearts ðŸ’•
  WEARY, // weary ðŸ˜©
  OKHND, // ok hand sign ðŸ‘Œ
  PENSV, // pensive ðŸ˜”
  SMIRK, // smirk ðŸ˜
  RECYC, // recycle â™»
  WINK, // wink ðŸ˜‰
  THMUP, // thumb up ðŸ‘
  THMDN, // thumb down ðŸ‘Ž
  PRAY, // pray ðŸ™
  PHEW, // relieved ðŸ˜Œ
  MUSIC, // musical notes
  FLUSH, // flushed ðŸ˜³
  CELEB, // celebration ðŸ™Œ
  CRY2, // crying face ðŸ˜¢
  COOL, // smile with sunglasses ðŸ˜Ž
  NOEVS, // see no evil
  NOEVH, // hear no evil
  NOEVK, // speak no evil
  POO, // pile of poo
  EYES, // eyes
  VIC, // victory hand
  BHART, // broken heart
  SLEEP, // sleeping face
  SMIL2, // smiling face with open mouth & sweat
  HUNRD, // 100
  CONFU, // confused
  TONGU, // face with tongue & winking eye
  DISAP, // disappointed
  YUMMY, // face savoring delicious food
  CLAP, // hand clapping
  FEAR, // face screaming in fear
  HORNS, // smiling face with horns
  HALO, // smiling face with halo
  BYE, // waving hand
  SUN, // sun
  MOON, // moon
  SKULL, // skull
};

const uint32_t PROGMEM unicode_map[] = {
  [GRIN] = 0x1F600,
  [TJOY] = 0x1F602,
  [SMILE] = 0x1F601,
  [HEART] = 0x2764,
  [EYERT] = 0x1f60d,
  [CRY] = 0x1f62d,
  [SMEYE] = 0x1F60A,
  [UNAMU] = 0x1F612,
  [KISS] = 0x1F618,
  [HART2] = 0x1F495,
  [WEARY] = 0x1F629,
  [OKHND] = 0x1F44C,
  [PENSV] = 0x1F614,
  [SMIRK] = 0x1F60F,
  [RECYC] = 0x267B,
  [WINK] = 0x1F609,
  [THMUP] = 0x1F44D,
  [THMDN] = 0x1F44E,
  [PRAY] = 0x1F64F,
  [PHEW] = 0x1F60C,
  [MUSIC] = 0x1F3B6,
  [FLUSH] = 0x1F633,
  [CELEB] = 0x1F64C,
  [CRY2] = 0x1F622,
  [COOL] = 0x1F60E,
  [NOEVS] = 0x1F648,
  [NOEVH] = 0x1F649,
  [NOEVK] = 0x1F64A,
  [POO] = 0x1F4A9,
  [EYES] = 0x1F440,
  [VIC] = 0x270C,
  [BHART] = 0x1F494,
  [SLEEP] = 0x1F634,
  [SMIL2] = 0x1F605,
  [HUNRD] = 0x1F4AF,
  [CONFU] = 0x1F615,
  [TONGU] = 0x1F61C,
  [DISAP] = 0x1F61E,
  [YUMMY] = 0x1F60B,
  [CLAP] = 0x1F44F,
  [FEAR] = 0x1F631,
  [HORNS] = 0x1F608,
  [HALO] = 0x1F607,
  [BYE] = 0x1F44B,
  [SUN] = 0x2600,
  [MOON] = 0x1F314,
  [SKULL] = 0x1F480,
};

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

  [_QWERTY] = LAYOUT( \
      LANG_SWITCH,     X(SKULL), \
      GRUNT,  NODE, \
      KC_MEDIA_REWIND,      KC_MEDIA_FAST_FORWARD, \
      MO(_FUNC), PLUS1  \
  ),

  [_FUNC] = LAYOUT( \
      LOCK,    SS, \
      KC_A,    KC_A, \
      KC_Z,    KC_X, \
      _______, KC_C \
  )

};

void matrix_init_user(void) {
  set_unicode_input_mode(UC_OSX);
}

bool process_record_user(uint16_t keycode, keyrecord_t *record) {
  if (record->event.pressed) {
    switch (keycode) {
      case PLUS1:
          SEND_STRING(":+1:" SS_TAP(X_ENTER));
        break;
      case GRUNT:
        SEND_STRING("grunt" SS_TAP(X_ENTER));
        break;
      case NODE:
        SEND_STRING("node server.js" SS_TAP(X_ENTER));
        break;
    }
  }
  return true;
};
